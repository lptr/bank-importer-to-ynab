(function(t){function e(e){for(var r,c,i=e[0],u=e[1],l=e[2],b=0,d=[];b<i.length;b++)c=i[b],Object.prototype.hasOwnProperty.call(a,c)&&a[c]&&d.push(a[c][0]),a[c]=0;for(r in u)Object.prototype.hasOwnProperty.call(u,r)&&(t[r]=u[r]);s&&s(e);while(d.length)d.shift()();return o.push.apply(o,l||[]),n()}function n(){for(var t,e=0;e<o.length;e++){for(var n=o[e],r=!0,i=1;i<n.length;i++){var u=n[i];0!==a[u]&&(r=!1)}r&&(o.splice(e--,1),t=c(c.s=n[0]))}return t}var r={},a={app:0},o=[];function c(e){if(r[e])return r[e].exports;var n=r[e]={i:e,l:!1,exports:{}};return t[e].call(n.exports,n,n.exports,c),n.l=!0,n.exports}c.m=t,c.c=r,c.d=function(t,e,n){c.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:n})},c.r=function(t){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},c.t=function(t,e){if(1&e&&(t=c(t)),8&e)return t;if(4&e&&"object"===typeof t&&t&&t.__esModule)return t;var n=Object.create(null);if(c.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var r in t)c.d(n,r,function(e){return t[e]}.bind(null,r));return n},c.n=function(t){var e=t&&t.__esModule?function(){return t["default"]}:function(){return t};return c.d(e,"a",e),e},c.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},c.p="/bank-importer-to-ynab/";var i=window["webpackJsonp"]=window["webpackJsonp"]||[],u=i.push.bind(i);i.push=e,i=i.slice();for(var l=0;l<i.length;l++)e(i[l]);var s=u;o.push([0,"chunk-vendors"]),n()})({0:function(t,e,n){t.exports=n("cd49")},"0994":function(t,e,n){},"526e":function(t,e,n){"use strict";n("0994")},5876:function(t,e,n){},6560:function(t,e,n){"use strict";n("5876")},cd49:function(t,e,n){"use strict";n.r(e);n("e260"),n("e6cf"),n("cca6"),n("a79d");var r=n("7a23");function a(t,e,n,a,o,c){var i=Object(r["l"])("wise-importer");return Object(r["f"])(),Object(r["c"])(i)}var o=n("d4ec"),c=n("262e"),i=n("2caf"),u=n("9ab4"),l=n("ce1f"),s=(n("b680"),function(t){return Object(r["i"])("data-v-8cb2b830"),t=t(),Object(r["g"])(),t}),b=s((function(){return Object(r["e"])("div",null,[Object(r["e"])("h1",null,"Wise importer")],-1)})),d=s((function(){return Object(r["e"])("label",{for:"wiseApiKey"},"Wise API key",-1)})),f=s((function(){return Object(r["e"])("label",{for:"upload"},"Upload Wise CSV",-1)})),p=["disabled"],O=["disabled"],j=s((function(){return Object(r["e"])("thead",null,[Object(r["e"])("tr",null,[Object(r["e"])("th",null,"Index"),Object(r["e"])("th",null,"Date"),Object(r["e"])("th",null,"Payee"),Object(r["e"])("th",null,"Memo"),Object(r["e"])("th",null,"Amount")])],-1)})),h={class:"index"},v={class:"amount"};function m(t,e,n,a,o,c){return Object(r["f"])(),Object(r["d"])(r["a"],null,[b,Object(r["e"])("div",null,[d,Object(r["o"])(Object(r["e"])("input",{id:"wiseApiKey","onUpdate:modelValue":e[0]||(e[0]=function(e){return t.wiseApiKey=e})},null,512),[[r["n"],t.wiseApiKey]])]),Object(r["e"])("div",null,[f,Object(r["e"])("input",{id:"upload",type:"file",onChange:e[1]||(e[1]=function(){return t.upload&&t.upload.apply(t,arguments)}),disabled:!t.wiseApiKey},null,40,p)]),Object(r["e"])("div",null,[Object(r["e"])("button",{onClick:e[2]||(e[2]=function(){return t.download&&t.download.apply(t,arguments)}),disabled:0===t.transactions.length},"Download YNAB CSV",8,O)]),Object(r["e"])("div",null,[Object(r["e"])("table",null,[j,Object(r["e"])("tbody",null,[(Object(r["f"])(!0),Object(r["d"])(r["a"],null,Object(r["k"])(t.transactions,(function(t,e){return Object(r["f"])(),Object(r["d"])("tr",{key:t.id},[Object(r["e"])("td",h,Object(r["m"])(e+1),1),Object(r["e"])("td",null,Object(r["m"])(t.date.toLocaleDateString()),1),Object(r["e"])("td",null,Object(r["m"])(t.payee),1),Object(r["e"])("td",null,Object(r["m"])(t.memo),1),Object(r["e"])("td",v,Object(r["m"])(t.amount.toFixed(2))+" HUF",1)])})),128))])])])],64)}var y=n("1da1"),w=(n("96cf"),n("ac1f"),n("d81d"),n("4de4"),n("a15b"),n("d3b7"),n("3ca3"),n("ddb0"),n("2ca0"),n("466d"),n("2af1"),n("99af"),n("369b")),g=n("21a6"),x=n("bc3a"),k=n.n(x),A=n("bee2"),P=(n("1276"),function(){function t(e,n,r,a,c){Object(o["a"])(this,t),this.date=e,this.payee=n,this.category=r,this.memo=a,this.amount=c}return Object(A["a"])(t,[{key:"toYnab",value:function(){return[t.toYnabDate(this.date),this.payee,this.category,this.memo,this.amount<0?(-this.amount).toFixed(2):"",this.amount>=0?this.amount.toFixed(2):""]}}],[{key:"toYnabDate",value:function(t){return t.toISOString().split("T")[0]}}]),t}());function F(t){var e=/(\d\d)-(\d\d)-(\d{4})/.exec(t);if(!e)throw new Error("Invalid date: ".concat(t));return new Date(+e[3],+e[2]-1,+e[1])}function S(t,e,n){return D.apply(this,arguments)}function D(){return D=Object(y["a"])(regeneratorRuntime.mark((function t(e,n,r){var a,o,c,i,u,l,s;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(a=n[2],o=n[3],"HUF"!==o){t.next=4;break}return t.abrupt("return",a);case 4:if(c=n[8],"HUF"!==c){t.next=12;break}if(!n[0].startsWith("CARD-")){t.next=10;break}if(i=n[4].match(/Card transaction of ([\d.]+) HUF issued by .*/),!i){t.next=10;break}return t.abrupt("return",+i[1]*Math.sign(a));case 10:return u=n[9],t.abrupt("return",a*u);case 12:return l="https://api.wise.com/v1/rates?source=".concat(o,"&target=HUF&time=").concat(P.toYnabDate(e)),t.next=15,k.a.get(l,{headers:{Authorization:"Bearer ".concat(r)}}).then((function(t){return t.data[0].rate})).catch((function(t){console.error(t)}));case 15:return s=t.sent,console.log(s),t.abrupt("return",a*s);case 18:case"end":return t.stop()}}),t)}))),D.apply(this,arguments)}var C=function(t){Object(c["a"])(n,t);var e=Object(i["a"])(n);function n(){return Object(o["a"])(this,n),e.apply(this,arguments)}return n}(l["b"]);C=Object(u["a"])([Object(l["a"])({data:function(){return{wiseApiKey:"",transactions:[]}},props:{},methods:{upload:function(t){var e=this,n=t.target,r=n.files[0];console.log(r);var a=new FileReader;a.readAsText(r,"UTF-8"),a.onload=function(t){var n,r=null===(n=t.target)||void 0===n?void 0:n.result;w["parse"](r,{delimiter:",",complete:function(t){var n=t.data;n.shift();var r=n.filter((function(t){return""!==t[0]})).map((function(t,n){console.log(n,t);var r=F(t[1]);return S(r,t,e.wiseApiKey).then((function(e){var n=[t[10],t[11],t[12],t[13]].filter((function(t){return t})).join(" / ")||"Wise internal",a=t[14],o=[t[4],t[5],a?"(Card: ***".concat(a,")"):""].filter((function(t){return t})).join(" / ");return new P(r,n,"",o,e)}))}));Promise.all(r).then((function(t){e.transactions=t}))}})}},download:function(){var t=this.transactions.map((function(t){return t.toYnab()}));t.unshift(["Date","Payee","Category","Memo","Outflow","Inflow"]);var e=w["unparse"](t,{delimiter:","}),n=new Blob([e],{type:"text/csv;charset=utf-8"});Object(g["saveAs"])(n,"ynab-import.csv")}}})],C);var U=C,_=(n("6560"),n("6b0d")),I=n.n(_);const K=I()(U,[["render",m],["__scopeId","data-v-8cb2b830"]]);var M=K,W=function(t){Object(c["a"])(n,t);var e=Object(i["a"])(n);function n(){return Object(o["a"])(this,n),e.apply(this,arguments)}return n}(l["b"]);W=Object(u["a"])([Object(l["a"])({components:{WiseImporter:M}})],W);var Y=W;n("526e");const H=I()(Y,[["render",a]]);var T=H;Object(r["b"])(T).mount("#app")}});
//# sourceMappingURL=app.8d413ca9.js.map